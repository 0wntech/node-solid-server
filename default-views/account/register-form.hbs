<div class="panel panel-default">
  <div class="panel-body">
    <form method="post" action="/api/accounts/new">
      {{> shared/error}}

      <div class="form-group">
        <label class="control-label" for="username">Username</label>
        <input type="text" name="username" id="username" placeholder="E.g. alice"
                required/>
        <p>Your username should be a lower-case word with only
        letters a-z and numbers 0-9 and without periods.</p>
      </div>
      
      <div class="form-group has-feedback">
        <label class="control-label" for="password">Password</label>
        <input type="password" class="control-progress" name="password" id="password" required/>
        <span class="glyphicon glyphicon-remove form-control-feedback hidden" aria-hidden="true"></span>
        <div class="progress">
          <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="4"></div>
        </div>
        <div class="help-block"></div>
      </div>

      <div class="form-group has-feedback">
        <label class="control-label" for="repeat_password">Repeat password</label>
        <input type="password" name="repeat_password" id="repeat_password" required/>
      </div>

      <div class="form-group">
        <label class="control-label" for="name">Name</label>
        <p>This name will appear in your profile.</p>
        <input type="text" name="name" id="name" required/>
      </div>

      <div class="form-group">
        <label class="control-label" for="email">Email</label>
        <input type="email" name="email" id="email"/>
        <span class="help-block">Your email will only be used for account recovery</span>
      </div>

      <input type="hidden" name="externalWebId" id="externalWebId"/>
      
      <button type="submit" class="authButton" id="register">Register</button>
      <input type="hidden" name="returnToUrl" value="{{returnToUrl}}"/>
      {{> auth/auth-hidden-fields}}
    </form>
  </div>
</div>
<script src="/common/js/owasp-password-strength-test.js" defer></script>
<script src="/common/js/text-encoder-lite.min.js" defer></script>
<script src="/common/js/solid.js" defer></script>

<script>
  var username = document.getElementById('username');
  username.onkeyup = function() {
    var list = document.getElementsByClassName('editable-username');
    for (let item of list) {
      item.innerHTML = username.value.toLowerCase()
    }
  }
</script>
